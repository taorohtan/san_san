// ----------------タッチイベントが利用可能かの判別-------------------------var supportTouch = 'ontouchend' in document;// イベント名var E_TOUCHSTART = supportTouch ? 'touchstart' : 'mousedown';var E_TOUCHMOVE = supportTouch ? 'touchmove' : 'mousemove';var E_TOUCHEND = supportTouch ? 'touchend' : 'mouseup';//=====================================================================function draw(id) {    var canvas = document.getElementById(id);    if (canvas == null)    	return false;		var context = canvas.getContext('2d');var mx;var my;var i;var j;var num;var mon;	mon=0;var pp=[];var kotae;var kh1;var kh2;var kh3;var kh4;var kh5;var kh6;var kh7;kh1=0;kh2=0;kh3=0;kh4=0;kh5=0;kh6=0;kh7=0;var gpk;//---問題番号（10個）var cux;//---cuboid() moji()　横・たて・高さ x座標のシフト	cux=10;var ran=[];var jjrnd;var k;var dam;var no;//---乱数の配列const pinp = new Audio('pinpon.mp3');const bu = new Audio("bubu.mp3");bgcolor();ten_key();moji("a");moji("b");moji("c");moji("d");moji("e");moji("f");moji("g");moji("h");open();iniset();context.fillStyle = 'blue';context.font = "20px Arial";context.fillText("S をタッチでスタート",280,250);//-----main()function main(){	bgcolor();	moji("a");moji("b");moji("c");moji("d");moji("e");moji("f");moji("g");moji("h");iniset();open();		ten_key();	ten_key_basyo();	nyuryoku();	select();	kaito();	fig();	mondai();//console.log(pp[0]+" "+pp[1]+" "+pp[2])//console.log(kotae)}//------main()function rndm(a){	var a;//----- a までの数	ran[0]=Math.floor(Math.random() * a);	k=1;	while(k<=a-1){		jjrnd=0;		dam=Math.floor(Math.random() * a);		for (i=0; i<k; i++){if (ran[i]==dam){jjrnd=1;}}		if (jjrnd==1) { } else {ran[i]=dam; k++;}	}}function pinbu (a,b){	var a;	var b;	if (a==0) {		pinp.volume = b;		pinp.play();		} else {		bu.volume = b;		bu.play();		}}function iniset(){context.fillStyle = 'red';context.font = "14px Arial";context.fillText("横＝6",100+cux,213);context.fillStyle = 'green';context.font = "14px Arial";context.fillText("たて＝2",76+cux,184);context.fillStyle = 'blue';context.font = "14px Arial";context.fillText("高さ＝3",36+cux,130);context.fillStyle ='blue';context.font = "20px Arial";context.fillText("頂点Eがもと",24,290);context.fillStyle='rgba(255, 0, 0, 0.1)';context.fillRect(20,268,120,30);context.beginPath();	context.beginPath();	context.arc(30+cux,200,6,0,2*Math.PI,false);	context.fillStyle='rgba(0, 0, 255, 1)';	context.fill();context.arc(130, -44, 260, Math.PI * 70/180, Math.PI*110/180, false);//---180context.strokeStyle='rgba(255, 0, 0, 0.2)';context.stroke();context.beginPath();context.arc(111, 239, 80, Math.PI * 210/180, Math.PI*262/180, false);//---180context.stroketyle='rgba(0, 255, 0, 0.2)';context.stroke();context.beginPath();context.arc(169, 150, 139, Math.PI * 159 / 180, Math.PI*201/180, false);context.strokeStyle='rgba(0, 0, 255, 0.2)';context.stroke();}//----------------function moji(alf){		var alf;		context.fillStyle = 'blue';		context.font = "18px Arial";		if (alf=="a"){context.fillText("A",10+cux,90);}//90+a,110+b);}		if (alf=="b"){context.fillText("B",210+cux,90);}//290+a,110+b);}		if (alf=="c"){context.fillText("C",260+cux,50);}//340+a,70+b);}//370+a,70+b);}		if (alf=="d"){context.fillText("D",90+cux,50);}//170+a,70+b);}		if (alf=="e"){context.fillText("E",10+cux,220);}//90+a,240+b);}		if (alf=="f"){context.fillText("F",210+cux,220);}//290+a,240+b);}		if (alf=="g"){context.fillText("G",270+cux,180);}//340+a,200+b);}//370+a,180+b);}		if (alf=="h"){context.fillText("H",110+cux,150);}//190+a,170+b);}}gpk=0;function mondai(){	gpk=ran[no];console.log(gpk);	var s;	if(gpk==0){s="A";point(30,100);}	if(gpk==1){s="B";point(210,100);}	if(gpk==2){s="C";point(270,60);}	if(gpk==3){s="D";point(90,60);}	if(gpk==4){s="F";point(210,200);}	if(gpk==5){s="G";point(270,160);}	if(gpk==6){s="H";point(90,160);}	//if(gpk<7){	if(no<7){		context.fillStyle = 'blue';		context.font = "20px Arial";		context.fillText("頂点"+s+" （横       ,たて       ,高さ       ）",80,250);		context.fillStyle='rgba(0, 255, 0, 0.1)'		context.fillRect(76,226,320,30);	}}function point(a,b){	var a;	var b;	context.beginPath();	context.arc(a+cux,b,6,0,2*Math.PI,false);	context.fillStyle='rgba(255, 0, 0, 1)';	context.fill();}function kaito(){		context.fillStyle = 'blue';		context.font = "14px Arial";		if(kh1==1){context.fillText("頂点A (横  0 ,たて  0 ,高さ  3 )",305,60);}//80);		if(kh2==1){context.fillText("頂点B (横  6 ,たて  0 ,高さ  3 )",305,85);}//105);		if(kh3==1){context.fillText("頂点C (横  6 ,たて  2 ,高さ  3 )",305,110);}//130);		if(kh4==1){context.fillText("頂点D (横  0 ,たて  2 ,高さ  3 )",305,135);}//155);		if(kh5==1){context.fillText("頂点F (横  6 ,たて  0 ,高さ  0 )",305,160);}//180);		if(kh6==1){context.fillText("頂点G (横  6 ,たて  2 ,高さ  0 )",305,185);}//205);		if(kh7==1){context.fillText("頂点H (横  0 ,たて  2 ,高さ  0 )",305,210);}//230);}function hint(){		if(gpk==0){cuboid("ae","blue");}		if(gpk==1){cuboid("ef","red");cuboid("bf","blue");}		if(gpk==2){cuboid("ef","red");cuboid("fg","green");cuboid("cg","blue");}		if(gpk==3){cuboid("eh","green");cuboid("dh","blue");}		if(gpk==4){cuboid("ef","red");}		if(gpk==5){cuboid("ef","red");cuboid("fg","green");}		if(gpk==6){cuboid("eh","green");}		//cuboid("ef","red");cuboid("fg","green");cuboid("cg","blue");}function open(){cuboid("ab","rgba(125,125,125,0.3)");cuboid("bf","rgba(125,125,125,0.3)");cuboid("ae","rgba(125,125,125,0.3)");cuboid("ef","rgba(125,125,125,0.3)");cuboid("ad","rgba(125,125,125,0.3)");cuboid("bc","rgba(125,125,125,0.3)");cuboid("eh","rgba(125,125,125,0.3)");cuboid("fg","rgba(125,125,125,0.3)");cuboid("cd","rgba(125,125,125,0.3)");cuboid("dh","rgba(125,125,125,0.3)");cuboid("hg","rgba(125,125,125,0.3)");cuboid("cg","rgba(125,125,125,0.3)");}//-----数値入力function nyuryoku(){		var h;var t; var o;		if((mx>184 && mx<410) && (my>260 && my<320)){			pp[mon]=num;			if (mon<3){mon++;}//---3桁まで入力		}}//-----数値入力表示function fig(){		var s1;		context.fillStyle = 'red';		context.font = "32px Arial";		for (s1=0; s1<mon; s1++){		context.fillText(pp[s1],188+s1*84,250);//175-----ansx+s1*13,ansy);//---13は字間		}}//-----　← M A N 押下時の処理function select(){	if((mx>184 && mx<500) && (my>260 && my<320)){			if(num==11){if(mon>0){mon=mon-1;}}		if(num==12){mondai();no=0;kh1=0;kh2=0;kh3=0;kh4=0;kh5=0;kh6=0;kh7=0;rndm(7)}//ran3();random(9);gpk=0;}		//----- G 押下時の数値化 →　kotae		if(num==13){				mon=mon-1;				if(mon==0){kotae=pp[0];}				if(mon==1){kotae=pp[0]*10+pp[1];}				if(mon==2){kotae=pp[0]*100+pp[1]*10+pp[2];}				mon=0;			//-----解答判定			if (kotae==3 && gpk==0){kh1=1;no=no+1;pinbu(0,0.5);}			if (kotae==603 && gpk==1){kh2=1;no=no+1;pinbu(0,0.5);}			if (kotae==623 && gpk==2){kh3=1;no=no+1;pinbu(0,0.5);}			if (kotae==23 && gpk==3){kh4=1;no=no+1;pinbu(0,0.5);}			if (kotae==600 && gpk==4){kh5=1;no=no+1;pinbu(0,0.5);}			if (kotae==620 && gpk==5){kh6=1;no=no+1;pinbu(0,0.5);}			if (kotae==20 && gpk==6){kh7=1;no=no+1;pinbu(0,0.5);}			if (no==7){				context.fillStyle = 'blue';				context.font = "20px Arial";				context.fillText("S をタッチでもう一度",280,250);			}		}		if(num==14){//-----次の問題			hint();		}	}}function cuboid(a,c){		var a;		var c;		rline();		if (a=="ad"){		context.moveTo(30+cux,100);		context.lineTo(90+cux,60);		context.strokeStyle=c;		context.stroke();		}		//---cd		if (a=="cd"){		context.moveTo(90+cux,60);		context.lineTo(270+cux,60);		context.strokeStyle=c;		context.stroke();		}		//---bc		if (a=="bc"){		context.moveTo(270+cux,60);		context.lineTo(210+cux,100);		context.strokeStyle=c;		context.stroke();		}		//---ab		if (a=="ab"){		context.moveTo(210+cux,100);		context.lineTo(30+cux,100);		context.strokeStyle=c;		context.stroke();		}		//---ae		if (a=="ae"){		context.moveTo(30+cux,100);		context.lineTo(30+cux,200);		context.strokeStyle=c;		context.stroke();		}		//---ef		if (a=="ef"){		context.moveTo(30+cux,200);		context.lineTo(210+cux,200);		context.strokeStyle=c;		context.stroke();		}		//---bf		if (a=="bf"){		context.moveTo(210+cux,200);		context.lineTo(210+cux,100);		context.strokeStyle=c;		context.stroke();		}		//---fg		if (a=="fg"){		context.moveTo(210+cux,200);		context.lineTo(270+cux,160);		context.strokeStyle=c;		context.stroke();		}		//---cg		if (a=="cg"){		context.moveTo(270+cux,160);		context.lineTo(270+cux,60);		context.strokeStyle=c;		context.stroke();		}		//---eh		if (a=="eh"){		context.setLineDash([5, 5]);		context.moveTo(30+cux,200);		context.lineTo(90+cux,160);		context.strokeStyle=c;		context.stroke();		}		//---hg		if (a=="hg"){		context.setLineDash([5, 5]);		context.moveTo(90+cux,160);		context.lineTo(270+cux,160);		context.strokeStyle=c;		context.stroke();		}		//---dh		if (a=="dh"){		context.setLineDash([5, 5]);		context.moveTo(90+cux,160);		context.lineTo(90+cux,60);		context.strokeStyle=c;		context.stroke();		}		rline();}//-----テンキー表示function ten_key(){		//bgcolor_btm();		context.fillStyle='#afeeee';		//fillRoundRect(context,　10,260, 23, 28, 5);		for(i=0; i<7; i++){			for(j=0; j<2; j++){				context.fillStyle='#afeeee'				fillRoundRect(context,　184+i*45,260+j*30, 43, 28, 5);				if (i<5){					context.fillStyle = 'blue';					context.font = "24px Arial";					if(j==0){context.fillText(i+1,194+4+i*45,24+260+j*28);}						else{if(i==4){context.fillText(i-4,194+4+i*45,24+260+j*28);}						else{context.fillText(i+6,194+4+i*45,24+260+j*28);}}					} else {}			}		}		context.fillStyle = 'blue';		context.font = "20px Arial";		context.fillText("←",194+5*45,24+260);		context.fillText("S",194+6*45,24+260);		context.fillText("答",194+5*45,24+260+28);		context.font = "14px Arial";		context.fillText("ヒント",185+6*45,24+260+28);}//-----テンキー押下時の値取得function ten_key_basyo(){	rline();//点線丸囲いが描かれてしまうので入れておく	if((mx>184 && mx<229) && (my>260 && my<290)){num=1;}	if((mx>229 && mx<274) && (my>260 && my<290)){num=2;}	if((mx>274 && mx<319) && (my>260 && my<290)){num=3;}	if((mx>319 && mx<360) && (my>260 && my<290)){num=4;}	if((mx>360 && mx<405) && (my>260 && my<290)){num=5;}	if((mx>405 && mx<450) && (my>260 && my<290)){num=11;}	if((mx>450 && mx<495) && (my>260 && my<290)){num=12;}		if((mx>184 && mx<229) && (my>290 && my<320)){num=6;}	if((mx>229 && mx<274) && (my>290 && my<320)){num=7;}	if((mx>274 && mx<319) && (my>290 && my<320)){num=8;}	if((mx>319 && mx<360) && (my>290 && my<320)){num=9;}	if((mx>360 && mx<405) && (my>290 && my<320)){num=0;}	if((mx>405 && mx<450) && (my>290 && my<320)){num=13;}	if((mx>450 && mx<495) && (my>290 && my<320)){num=14;}}//-----実線にもどすfunction rline(){		context.beginPath();		context.setLineDash([]);		context.closePath();}function bgcolor(){	context.fillStyle='#ffffe0'//'rgba(0, 255, 0, 0.5)'	context.fillRect(0,0,500,320);}function bgcolor_bm(){	context.fillStyle='#ffffe0'//'rgba(0, 255, 0, 0.5)'	context.fillRect(290,40,230,180);}//------マル四角を描画するfunction-----//------https://qiita.com/PG0721/items/6fb9e9c02675be832402---よりfunction fillRoundRect(context, x, y, w, h, r) {    createRoundRectPath(context, x, y, w, h, r);    context.fill();}function createRoundRectPath(context, x, y, w, h, r) {    context.beginPath();    context.moveTo(x + r, y);    context.lineTo(x + w - r, y);    context.arc(x + w - r, y + r, r, Math.PI * (3/2), 0, false);    context.lineTo(x + w, y + h - r);    context.arc(x + w - r, y + h - r, r, 0, Math.PI * (1/2), false);    context.lineTo(x + r, y + h);           context.arc(x + r, y + h - r, r, Math.PI * (1/2), Math.PI, false);    context.lineTo(x, y + r);    context.arc(x + r, y + r, r, Math.PI, Math.PI * (3/2), false);    context.closePath();}//------マル四角を描画するfunctionここまで-----//----Canvas全体をクリアするfunctionfunction cls(){	context.clearRect(0,0,canvas.width,canvas.height);}//-----ここからマウスの位置を取得するcanvas.addEventListener(E_TOUCHSTART, onTouchStart);	function onTouchStart(e) {	canvas.addEventListener(E_TOUCHMOVE, onTouchMove);	canvas.addEventListener(E_TOUCHEND, onTouchEnd);}function onTouchMove(e) {	//cls();}function onTouchEnd(e) {	canvas.removeEventListener(E_TOUCHMOVE, onTouchMove);	canvas.removeEventListener(E_TOUCHEND, onTouchEnd);	mx=e.pageX;	my=e.pageY;		main();	//ten_key_basyo();			//console.log("x= "+mx+" : y= "+my)//------コンソールに座標を表示}// デフォルトのイベントを禁止	document.ontouchmove = function(evt){	evt.preventDefault();	}}//-------最終かっこ>>>function draw(id) { 